// ==UserScript==
// @name         HH Club Chat++
// @version      0.36
// @description  Upgrade Club Chat with various features and bug fixes
// @author       -MM-
// @match        https://*.hentaiheroes.com/
// @match        https://*.hentaiheroes.com/?*
// @match        https://*.hentaiheroes.com/#*
// @match        https://*.comixharem.com/
// @match        https://*.comixharem.com/?*
// @match        https://*.comixharem.com/#*
// @match        https://*.pornstarharem.com/
// @match        https://*.pornstarharem.com/?*
// @match        https://*.pornstarharem.com/#*
// @run-at       document-end
// @namespace    https://github.com/HH-GAME-MM/HH-Club-Chat-Plus-Plus
// @updateURL    https://github.com/HH-GAME-MM/HH-Club-Chat-Plus-Plus/raw/main/HH-Club-Chat-Plus-Plus.user.js
// @downloadURL  https://github.com/HH-GAME-MM/HH-Club-Chat-Plus-Plus/raw/main/HH-Club-Chat-Plus-Plus.user.js
// @icon         https://www.google.com/s2/favicons?sz=64&domain=hentaiheroes.com
// @grant        GM_info
// ==/UserScript==

//CHANGELOG: https://github.com/HH-GAME-MM/HH-Club-Chat-Plus-Plus/blob/main/CHANGELOG.md

(function() {
"use strict";console.log("HH Club Chat++ Script v"+GM_info.script.version);const HHCLUBCHATPLUSPLUS_URL_DOWNLOAD="https://github.com/HH-GAME-MM/HH-Club-Chat-Plus-Plus/raw/main/HH-Club-Chat-Plus-Plus.user.js",HHCLUBCHATPLUSPLUS_URL_RES="https://raw.githubusercontent.com/HH-GAME-MM/HH-Club-Chat-Plus-Plus/main/res/",HHCLUBCHATPLUSPLUS_INDICATOR=" ‍";checkPushVersion(),createNewInputAndSendButton(),fixClubChat(),fixScrolling(),loadLastChatWindowPositionAndSize(document.querySelector("#resize-chat-box"));let css=document.createElement("style");document.head.appendChild(css),css.sheet.insertRule("div.chat-msg div.chat-msg-avatar {width:42px !important;height:42px !important;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-avatar img.icon {width:36px !important;height:36px !important;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-txt {margin-top:-16px !important;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-info span.chat-msg-time {margin-top:-2px;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-info span.chat-msg-sender span.playername {cursor:pointer;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-info span.chat-msg-sender span.member {color:#8a8ae6;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-info span.chat-msg-sender span.coleader {color:#f3a03c;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-info span.chat-msg-sender span.leader {color:#f33c3d;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-info span.chat-msg-sender span.self {color:#ffd700;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-info span.chat-msg-sender span.active_light {display:inline-block;width:.75rem;height:.75rem;margin:0px 4px 4px 11px;transform:rotate(45deg);border:1px solid #000;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-info span.chat-msg-sender span.HHCCPlusPlus {color:white;font-size:20px;line-height:1;margin:0px 2px 0px 5px;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-info {pointer-events: none;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-info * {pointer-events: auto;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-txt a {color:white;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-txt img {max-width:200px;max-height:100px;}"),css.sheet.insertRule("div.club-chat-messages div.chat-msg div.chat-msg-txt img.emoji {max-width:24px;max-height:24px;}"),css.sheet.insertRule("div.club-chat-messages div.chat-msg div.chat-msg-txt img.emoji-only {max-width:36px;max-height:36px;}"),css.sheet.insertRule("div.pinned-block div.chat-msg div.chat-msg-txt img.emoji {max-width:16px;max-height:16px;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-txt div.hh {width:300px;background-color:#2f3136;padding:7px;border-radius:7px;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-txt div.hh div.left {float:left;width:70%;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-txt div.hh div.right {float:right;width:30%;text-align:right;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-txt div.hh div.clear {clear:both;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-txt div.hh img {width:80px;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-txt div.poses {display:inline-block;background-color:#2f3136;padding:7px;border-radius:7px;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-txt div.poses a {padding:0px 10px 0px 10px;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-txt div.poses span {padding:0px 10px 0px 10px;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-txt div.poses span.spoiler-visible {background:none;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-txt div.poses span.spoiler-visible * {background:none;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-txt div.poses span.spoiler {display:inline-block;height:100px;width:100%;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-txt span.ping {background-color:#4e4d73;padding:0px 3px 0px 3px;border-radius:3px;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-txt span.ping-invalid {background-color:#4e4d73;padding:0px 3px 0px 3px;border-radius:3px;}"),css.sheet.insertRule('div.chat-msg div.chat-msg-txt span.ping-invalid:after {color:#4e4d73;background-image:url("https://hh2.hh-content.com/ic_new.png");background-size:8px auto;background-repeat:no-repeat;background-position:1px 1px;content:"_";}'),css.sheet.insertRule("div.chat-msg div.chat-msg-txt span.spoiler {background:#202225;padding:0px 3px 0px 3px;border-radius:3px;color:transparent;cursor:pointer;user-select:none;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-txt span.spoiler * {background:#202225;padding:0px;border-radius:0px;color:transparent;cursor:pointer;user-select:none;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-txt span.spoiler a {pointer-events:none;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-txt span.spoiler img {padding:0px 3px 0px 3px;border-radius:3px;max-width:1px;max-height:1px;filter:opacity(0%);}"),css.sheet.insertRule("div.chat-msg div.chat-msg-txt span.spoiler-visible {background:#4a4d53;padding:0px 3px 0px 3px;border-radius:3px;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-txt span.spoiler-visible * {background:#4a4d53;padding:0px;border-radius:0px;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-txt span.spoiler-visible a {pointer-events: auto;}"),css.sheet.insertRule("div.chat-msg div.chat-msg-txt span.spoiler-visible img {padding:0px 3px 0px 3px;border-radius:3px;}"),css.sheet.insertRule("input.club-chat-input-custom {width:100%;height:38px;color:#fff;font-size:16px;padding-left:12px;border:1px solid #ffa23e;background-color:rgba(0,0,0,.3);box-shadow:0 2px 0 #c61f52,0 0 13px rgba(159,7,58,.6),0 0 13px rgba(159,7,58,.95);border-radius:4px;font-family:Tahoma,Helvetica,Arial,sans-serif;padding-right:80px;}"),css.sheet.insertRule("button.club-chat-send-custom {position:absolute;top:7px;right:1px;border:none;background-color:transparent;outline:0;cursor:pointer;}"),css.sheet.insertRule('#btnEmojisGIFs {position:absolute;top:5px;right:43px;border:none;background-color:transparent;outline:0;cursor:pointer;width:28px;height:28px;background-image:url("https://cdn.discordapp.com/emojis/861385389004947526.webp?size=48&quality=lossless");background-size:28px;background-repeat:no-repeat;background-position:right;padding-right:33px;}');let cssOnline=document.createElement("style");document.head.appendChild(cssOnline);let playerName=null,playerNamePing=null,pingValidList=[],pingMessageCount=0,lastMsgTimestamp=0,lastMsgTimestampSeen=loadLastMsgTimestampSeen();const mapGIFs=getMapGIFs(),mapEmojis=getMapEmojis(),mapCustomEmojiGifHosts=getMapCustomEmojiGifHosts(),mapCustomEmojiGifFileExtensions=getMapCustomEmojiGifFileExtensions();let emojiKeyboard;function observerMessagesFunction(e,t){let i=getIFrame(),s=document.querySelector("#resize-chat-box").classList.contains("visible");null==playerName&&null!=i.querySelector(".square-avatar-wrapper")&&(playerName=i.querySelector(".square-avatar-wrapper").getAttribute("title"),playerNamePing="@"+playerName.toLowerCase().replaceAll(" ","_"));let n=ClubChat.id_member,a=parseInt(ClubChat.chatVars.CLUB_INFO.leader_id),o=[];ClubChat.chatVars.CLUB_INFO.co_leaders.forEach((e=>{o.push(parseInt(e))})),0==pingValidList.length&&0!=document.querySelectorAll("div.chat-members-list div.member p.name-member").length&&(pingValidList.push("@club"),document.querySelectorAll("div.chat-members-list div.member p.name-member").forEach((e=>pingValidList.push("@"+e.innerHTML.toLowerCase().replaceAll(" ","_")))));for(let t=0;t<e.length;t++)for(let l=0;l<e[t].addedNodes.length;l++){let r=e[t].addedNodes[l],d=r.getAttribute("msg_id");if(null==d)break;let c=d.split(":"),m=parseInt(c[0]),u=parseInt(c[1]),h=parseInt(c[2]),p=r.lastElementChild.innerHTML,g=p.endsWith(" ‍");g&&(p=p.substr(0,p.length-" ‍".length));let b=p.toLowerCase(),f=1==e[t].pinnedBlock;lastMsgTimestamp<h&&(lastMsgTimestamp=h),s&&lastMsgTimestampSeen<lastMsgTimestamp&&(lastMsgTimestampSeen=lastMsgTimestamp,saveLastMsgTimestampSeen());let v=r.querySelector("div.chat-msg-info span.chat-msg-sender"),C=document.createElement("span");if(C.setAttribute("class","playername "+(u==n?"self":u==a?"leader":o.includes(u)?"coleader":"member")),C.setAttribute("onClick","ClubChat.insertPingToInput(this)"),C.innerHTML=v.innerHTML,v.innerHTML="",v.appendChild(C),!f){let e=document.createElement("span");e.setAttribute("class","active_light"),e.setAttribute("title","Online Status"),v.appendChild(e)}if(g){let e=document.createElement("span");e.setAttribute("class","HHCCPlusPlus"),e.setAttribute("title","HH Club Chat++"),e.innerHTML="++",v.appendChild(e)}let A=[],y=!1,x=!1;if("!help"!=b||f)if(b.startsWith("!hh ")&&b.length>4&&!f){let e=p.substr(4).trim(),t=-1,i=null,s=getHHPlusPlusGirlDictionary();if(strIsInt(e)?(t=parseInt(e),i=getGirlNameById(t,s),null==i&&(i="Unknown Girl")):(t=getGirlIdByName(e,s),-1!=t&&(i=getGirlNameById(t,s))),-1!=t){let e="Unknown Girl"!=i?"https://harem-battle.club/wiki/Harem-Heroes/HH:"+i.replaceAll(" ","-").replaceAll(".","").replaceAll("’",""):null;A.push({isValid:!0,value:'<div class="hh"><div class="left">'+(null!=e?'<a href="'+e+'" target="_blank">'+i+"</a>":"Girl ID "+t)+"<br/><br/>"+(null!=e?"All":"No")+' infos about her!</div><div class="right">'+(null!=e?'<a href="'+e+'" target="_blank">':"")+'<img title="'+i+'" src="https://hh2.hh-content.com/pictures/girls/'+t+'/ico0-300x.webp?v=5" onload="ClubChat.resizeNiceScrollAndUpdatePosition()">'+(null!=e?"</a>":"")+'</div><div class="clear"></div></div>'+(null!=e?'<br/><a href="'+e+'" target="_blank">'+e+"</a>":"")})}}else if(b.startsWith("!poses ")&&b.length>7&&!f){let e=p.substr(7).trim(),t=-1,i=null,s=-1,n=getHHPlusPlusGirlDictionary();if(strIsInt(e)?(t=parseInt(e),i=getGirlNameById(t,n),null==i?i="Unknown Girl":s=getGirlGradeById(t,n)):(t=getGirlIdByName(e,n),-1!=t&&(i=getGirlNameById(t,n),s=getGirlGradeById(t,n))),-1!=t){let e="<span class=\"spoiler\" title=\"click to reveal spoiler\" onClick=\"this.setAttribute('class','spoiler-visible');this.setAttribute('title','');ClubChat.resizeNiceScroll()\">";-1==s&&(s=6);for(let i=0;i<=s;i++)e+='<a href="https://hh2.hh-content.com/pictures/girls/'+t+"/ava"+i+'-1200x.webp?v=5" target="_blank"><img title="Pose '+i+'" src="https://hh2.hh-content.com/pictures/girls/'+t+"/ava"+i+'-300x.webp?v=5" onload="ClubChat.resizeNiceScrollAndUpdatePosition()" onerror="this.parentNode.style.display=\'none\'"></a>';e+="</span>";let n="Unknown Girl"!=i?"https://harem-battle.club/wiki/Harem-Heroes/HH:"+i.replaceAll(" ","-").replaceAll(".","").replaceAll("’",""):null;A.push({isValid:!0,value:'<div class="poses">'+(null!=n?'<a href="'+n+'" target="_blank">Poses: '+i+"</a>":"<span>Poses: Girl ID "+t)+"</span><br/><br/>"+e+"</div>"+(null!=n?'<br/><br/><a href="'+n+'" target="_blank">'+n+"</a>":"")})}}else if(b.startsWith("/plain "))A.push({isValid:!0,value:p.substr(7)});else if("/dice"!=b||f){x=!f;let e=!1;b.startsWith("/spoiler ")&&(b=b.substr(9),p=p.substr(9),e=!0);let t=p.split(" "),n=!1,a=-1,o=-1,l=-1,d=-1,c=!1;for(let e=0;e<t.length;e++){let u=t[e];if(""==u)continue;let p=u.toLowerCase();if(p.startsWith("https://")){x=!1;let e=p.indexOf("?");-1==e&&(e=p.length);let t=p.substr(e-5,5);(t.endsWith(".gif")||t.endsWith(".jpg")||".jpeg"==t||t.endsWith(".png")||".webp"==t)&&!f?A.push({isValid:!0,value:'<a href="'+u+'" target="_blank"><img src="'+u+'" onload="ClubChat.resizeNiceScrollAndUpdatePosition()"></a>'}):A.push({isValid:!0,value:'<a href="'+u+'" target="_blank" onclick="return confirm(\'Do you really want to open this link?\')">'+u+"</a>"})}else if(u.startsWith("@")&&1!=u.length&&!f){if([",",".","!","?",":",")"].includes(p[p.length-1])&&(p=p.substr(0,p.length-1)),1898==m&&window.location.hostname.includes(".hentaiheroes.com"))switch(p){case"@mm":p="@-mm-";break;case"@holy":p="@holymolly";break;case"@epic":case"@bacon":p="@epicbacon";break;case"@finder":case"@finds":p="@finderkeeper";break;case"@yoyo":p="@yoyowhan";break;case"@hvj":p="@hvjkzv";break;case"@chuck":case"@maximus":case"@master":p="@master_maximus";break;case"@mars":case"@marsome":p="@marsome-dominatrix";break;case"@ck":case"@ckiller":p="@cuntkiller";break;case"@pity":p="@pitythefool";break;case"@chico":p="@chico_bonbon";break;case"@nat":p="@natstar";break;case"@z":p="@zteev";break;case"@zami":p="@zam";break;case"@safi":p="@safi_the_orca";break;case"@fakemm":case"@hpfcc":p="@hērōēs_prāvī_forī_cc"}if(pingValidList.includes(p)){if(A.push({isValid:!0,value:'<span class="ping">'+u+"</span>"}),!n&&("@club"==p||null!=playerNamePing&&p==playerNamePing)&&(n=!0,r.setAttribute("style","background-color:#49443c"),!s&&lastMsgTimestampSeen<h)){pingMessageCount++;let e=getPingNotificationBox(i);pingUpdateText(e),pingVisible(e)}}else A.push({isValid:!0,value:'<span class="ping-invalid" title="Invalid Ping">'+u+"</span>"})}else{let t,i=0,s=0;do{t=!1,p.length>2&&(-1==a&&p.startsWith("**")&&(a=A.push({isValid:!1,value:'<span style="font-weight:bold;">',invalidValue:"**"})-1,p=p.substr(2,p.length-2),i+=2,t=!0),-1==l&&p.startsWith("__")&&(l=A.push({isValid:!1,value:'<span style="text-decoration:underline;">',invalidValue:"__"})-1,p=p.substr(2,p.length-2),i+=2,t=!0),-1==d&&p.startsWith("~~")&&(d=A.push({isValid:!1,value:'<span style="text-decoration:line-through;">',invalidValue:"~~"})-1,p=p.substr(2,p.length-2),i+=2,t=!0)),p.length>1&&-1==o&&p.startsWith("*")&&(o=A.push({isValid:!1,value:'<span style="font-style:italic;">',invalidValue:"*"})-1,p=p.substr(1,p.length-1),i++,t=!0)}while(t);let n=A.push({isValid:!0,value:""})-1;do{t=!1,p.length>2&&(-1!=a&&p.endsWith("**")&&(A[a].isValid=!0,a=-1,A.push({isValid:!0,value:"</span>"}),p=p.substr(0,p.length-2),s+=2,t=!0),-1!=l&&p.endsWith("__")&&(A[l].isValid=!0,l=-1,A.push({isValid:!0,value:"</span>"}),p=p.substr(0,p.length-2),s+=2,t=!0),-1!=d&&p.endsWith("~~")&&(A[d].isValid=!0,d=-1,A.push({isValid:!0,value:"</span>"}),p=p.substr(0,p.length-2),s+=2,t=!0)),p.length>1&&-1!=o&&p.endsWith("*")&&(A[o].isValid=!0,o=-1,A.push({isValid:!0,value:"</span>"}),p=p.substr(0,p.length-1),s++,t=!0)}while(t);if(0==i&&0==s||(u=u.substr(i,u.length-i-s)),p.length>2&&p.startsWith(":")&&p.endsWith(":")&&mapEmojis.has(p)){let e=mapEmojis.get(p);e.startsWith(":")&&(e=mapEmojis.get(e));let t=e.startsWith("res:")?HHCLUBCHATPLUSPLUS_URL_RES+"emojis/"+e.substr(4):"https://cdn.discordapp.com/emojis/"+e+".webp?size=48&quality=lossless";A[n].value='<img class="emoji" src="'+t+'" title="'+p+'" onload="ClubChat.resizeNiceScrollAndUpdatePosition()">',A[n].isEmoji=!0}else if(isCustomEmojiCode(u)){let e=convertCustomEmojiCodeToUrl(u);A[n].value='<img class="emoji" src="'+e+'" title=":CustomEmoji:" onload="ClubChat.resizeNiceScrollAndUpdatePosition()">',A[n].isEmoji=!0}else if(!c&&p.startsWith("!")&&(mapGIFs.has(p)||isCustomGifCode(u)||p.includes("_")&&mapGIFs.has(p.substr(0,p.indexOf("_"))))&&!f){let t;if(x=!1,c=!0,isCustomGifCode(u))p="!CustomGif",t=convertCustomGifCodeToUrl(u);else{let e,i;p.includes("_")?(e=parseInt(p.substr(p.indexOf("_")+1)),isNaN(e)&&(e=h),i=p.substr(0,p.indexOf("_"))):(e=h,i=p);let s=mapGIFs.get(i);Array.isArray(s)||(s=mapGIFs.get(s)),t=s[e%s.length]}let i='<img src="'+(t.startsWith("https://")?t:"https://media.tenor.com/"+t)+'" title="'+p+'" onload="ClubChat.resizeNiceScrollAndUpdatePosition()">';0==e?A[n].value=i:(A[n].value=p,A.unshift({isValid:!0,value:i+" "}))}else x=!1,A[n].value=u}e<t.length-1&&A.push({isValid:!0,value:" "})}e&&(A.unshift({isValid:!0,value:"<span class=\"spoiler\" title=\"click to reveal spoiler\" onClick=\"this.setAttribute('class','spoiler-visible');this.setAttribute('title','');ClubChat.resizeNiceScroll()\">"}),A.push({isValid:!0,value:"</span>"}))}else{A.push({isValid:!0,value:b});let e=document.createElement("div");e.setAttribute("class","chat-system-msg"),e.setAttribute("style","font-size:16px"),e.innerHTML=' <b style="font-weight:bold">Dice Master:</b> <span style="font-size:16px">'+C.innerHTML+" rolled a "+(h%6+1)+' !</span> <span style="color:rgb(170,170,170);font-size:12px">'+r.querySelector("div.chat-msg-info span.chat-msg-time").innerHTML+"</span> ",r.after(e)}else if(u==n){y=!0;let e="";mapGIFs.forEach(((t,i)=>{(Array.isArray(t)&&1==t.length||!Array.isArray(t)&&1==mapGIFs.get(t).length)&&(e+=i+" ")}));let t="";mapGIFs.forEach(((e,i)=>{(Array.isArray(e)&&1!=e.length||!Array.isArray(e)&&1!=mapGIFs.get(e).length)&&(t+=i+" ")}));let i="";mapEmojis.forEach(((e,t)=>{i+=t+" "})),A.push({isValid:!0,value:'!help = show this help (hidden for other script users)<br/><br/><span style="font-weight:bold;">PING</span><br/>@club = ping all club members<br/>@<span style="font-style:italic;">&lt;membername&gt;</span> = ping a club member<br/>Note 1: Club members will receive a notification outside of the chat, when the chat is not open<br/>Note 2: Replace spaces with underscores. E.g. to ping John Doe write @John_Doe<br/>Note 3: Click on a nickname to ping<br/><br/><span style="font-weight:bold;">SPOILER</span><br/>/spoiler <span style="font-style:italic;">&lt;text / images&gt;</span> = hide text and images in a spoiler block<br/><br/><span style="font-weight:bold;">LINKS / IMAGES / GIRL POSES</span><br/>Links and images are clickable and open in a new tab. Post a URL to an image or a girl pose and it will be embedded in the chat.<br/><br/><span style="font-weight:bold;">COMMANDS</span><br/>!hh <span style="font-style:italic;">&lt;girl name / girl id&gt;</span> = post a wiki link for a girl (HH++ required)<br/>!poses <span style="font-style:italic;">&lt;girl name / girl id&gt;</span> = post a wiki link and all poses of a girl in a spoiler block (HH++ required)<br/>!script <span style="font-style:italic;">&lt;optional text&gt;</span> = post the script links with an optional text (user friendly for non-script users)<br/><br/><span style="font-weight:bold;">DICE</span><br/>/dice = roll a dice (D6, 1-6)<br/><br/><span style="font-weight:bold;">TEXT FORMATTING</span><br/>*italic* = <span style="font-style:italic;">italic</span><br/>**bold** = <span style="font-weight:bold;">bold</span><br/>__underline__ = <span style="text-decoration:underline;">underlined</span><br/>~~strikethrough~~ = <span style="text-decoration:line-through;">strikethrough</span><br/><br/><span style="font-weight:bold;">PLAINTEXT</span><br/>/plain <span style="font-style:italic;">&lt;text&gt;</span> = post text without text formatting<br/><br/><span style="font-weight:bold;">GIFS</span><br/>The following gifs are available: '+e+"<br/>The following random gifs are available: "+t+'<br/>Note: Only one GIF per message allowed. GIF code can be used anywhere in the text<br/><br/><span style="font-weight:bold;">EMOJIS</span><br/>The following emojis are available: '+i+'<br/><br/><span style="font-weight:bold;">MISCELLANEOUS</span><br/>- The nickname color is changed. Your nickname is gold, the club leader is red, the club co leaders are orange and all members are blue<br/>- Online/Offline status added behind the nickname (with auto refresh)<br/>- ++ added behind the nickname (indicates who is using this script)<br/>- Added Emojis / GIFs Picker "EmojiKeyboard"<br/>- Chat window remains in its position and size<br/>- Auto Scrolling fixed. It scrolls only if the scrollbar is close to the bottom<br/>- Bug Fixes: "Idle/Disconnect", "Chat disabled until click a menu", "Firefox: Member list outside the window"<br/>- Avatars are a bit bigger<br/><br/><span style="font-weight:bold;">CREDITS</span><br/>Script coded by -MM- and tested with club mates "Hērōēs Prāvī Forī [EN]"<br/>Compatible with Mozilla Firefox (Desktop), Google Chrome (Desktop & Android), Firefox Nightly (Android)<br/><br/><span style="font-weight:bold;">SPONSORS</span><br/>Uxio and lep - Thanks for sponsoring!<br/>If you would like to support me, you can do so here: <a href="https://www.buymeacoffee.com/HHMM" target="_blank">https://www.buymeacoffee.com/HHMM</a><br/><br/><span style="font-weight:bold;">SCRIPT INFORMATION</span><br/>HH Club Chat++ Script v'+GM_info.script.version+'<br/><a href="https://github.com/HH-GAME-MM/HH-Club-Chat-Plus-Plus/blob/main/CHANGELOG.md" target="_blank">https://github.com/HH-GAME-MM/HH-Club-Chat-Plus-Plus/blob/main/CHANGELOG.md</a>'})}else r.setAttribute("style","display:none;");if(0!=A.length){let e="";A.forEach((t=>{e+=t.isValid?x&&t.isEmoji?t.value.replace('class="emoji"','class="emoji-only"'):t.value:t.invalidValue})),r.lastElementChild.innerHTML=e,ClubChat.resizeNiceScrollAndUpdatePosition(),y&&scrollDown()}}}initEmojiKeyboard();const observerMessages=new MutationObserver(observerMessagesFunction);observerMessages.observe(document.querySelector("div.club-chat-messages.dark_subpanel_box"),{childList:!0});const observerOnline=new MutationObserver(((e,t)=>{for(let t=0;t<e.length;t++){for(let i=0;i<e[t].addedNodes.length;i++){let s=e[t].addedNodes[i].getAttribute("member_id");cssOnline.sheet.insertRule('div.chat-msg[msg_id*=":'+s+':"] div.chat-msg-info span.chat-msg-sender span.active_light {background-color:#47bd0d;}')}for(let i=0;i<e[t].removedNodes.length;i++){let s=e[t].removedNodes[i].getAttribute("member_id");for(let e=0;e<cssOnline.sheet.cssRules.length;e++)if(cssOnline.sheet.cssRules[e].selectorText==='div.chat-msg[msg_id*=":'+s+':"] div.chat-msg-info span.chat-msg-sender span.active_light'){cssOnline.sheet.deleteRule(e);break}}}}));observerOnline.observe(document.querySelector("div.chat-members-list div.online-members"),{childList:!0});const observerChatWindow=new MutationObserver(((e,t)=>{let i=getIFrame();for(let t=0;t<e.length;t++)"class"==e[t].attributeName?e[t].target.classList.contains("visible")?(lastMsgTimestampSeen<lastMsgTimestamp&&(lastMsgTimestampSeen=lastMsgTimestamp,saveLastMsgTimestampSeen(),pingMessageCount=0,pingInvisible(getPingNotificationBox(i))),updateEmojiKeyboardPositionAndSize(e[t].target),scrollDown()):null!=document.getElementById("emojikb-maindiv")&&document.getElementById("emojikb-maindiv").classList.add("emojikb-hidden"):"style"==e[t].attributeName&&(saveLastChatWindowPositionAndSize(e[t].target),updateEmojiKeyboardPositionAndSize(e[t].target))}));observerChatWindow.observe(document.querySelector("#resize-chat-box"),{attributes:!0});const observerSendMsg=new MutationObserver(((e,t)=>{let i=-1;for(let t=0;t<e.length;t++)if("disabled"==e[t].attributeName){let s=null;s="club-chat-input"==e[t].target.className?document.querySelector("input.club-chat-input-custom"):document.querySelector("button.club-chat-send-custom"),null==e[t].target.getAttribute("disabled")?(s.removeAttribute("disabled"),i=0):(s.setAttribute("disabled","disabled"),ClubChat.isMuted||(i=1))}if(0==i&&0==ClubChat.$msgHolder[0].scrollTop)scrollDown();else if(1==i&&ClubChat.hasInit&&!ClubChat.isConnected){let e=getIFrame(),t=e.querySelector("#popup_message div"),i=null==t?null:t.innerHTML.toLowerCase();null!=i&&(i.includes("chat server")||i.includes("chatserver")||i.includes("chat serveur")||i.includes("server chat")||i.includes("servidor de chat")||i.includes("チャットサーバー")||i.includes("чат"))?e.querySelectorAll("#popup_message close").forEach((e=>{e.setAttribute("onClick","this.parentNode.remove()")})):(pingMessageCount=0,ClubChat.hasInit=!1,fixClubChat())}}));function createNewInputAndSendButton(){let e=document.querySelector("div.send-block-container"),t=document.createElement("input");t.setAttribute("class","club-chat-input-custom"),t.setAttribute("maxlength",500-" ‍".length),null!=document.querySelector("input.club-chat-input").getAttribute("disabled")&&t.setAttribute("disabled","disabled"),t.addEventListener("keyup",(function(e){if("Enter"==e.key)n();else if("ArrowUp"==e.key||"ArrowDown"==e.key){let t=document.querySelector("input.club-chat-input"),i=t.value;ClubChat.onInputKeyUp(e);let s=t.value;i!=s&&(document.querySelector("input.club-chat-input-custom").value=s.substr(0,s.length-" ‍".length))}})),e.appendChild(t);let i=document.createElement("button");i.setAttribute("class","club-chat-send-custom"),null!=document.querySelector("button.club-chat-send").getAttribute("disabled")&&i.setAttribute("disabled","disabled"),i.addEventListener("click",n),e.appendChild(i);let s=document.createElement("span");function n(){let e=document.querySelector("input.club-chat-input-custom");if(0!=e.value.length){let t=e.value,i=t.toLowerCase(),s=document.querySelector("input.club-chat-input");e.value="";let n=null;if(i.startsWith("!hh ")&&i.length>4?n="!hh ":i.startsWith("!poses ")&&i.length>7&&(n="!poses "),null!=n){let e=t.substr(n.length).trim();if(!strIsInt(e)){let i=getGirlIdByName(e,getHHPlusPlusGirlDictionary());-1!=i&&(t=n+i)}}else if(i.startsWith("!script")){let e=t.substr(7);return s.value=e+" Club Chat++ description and installation instructions: https://github.com/HH-GAME-MM/HH-Club-Chat-Plus-Plus",ClubChat.send_msg(),s.value=e+" Club Chat++ direct link: https://github.com/HH-GAME-MM/HH-Club-Chat-Plus-Plus/raw/main/HH-Club-Chat-Plus-Plus.user.js",void ClubChat.send_msg()}s.value=t+" ‍",ClubChat.send_msg()}}s.setAttribute("class","rightArrow_mix_icn"),i.appendChild(s),document.querySelector("input.club-chat-input").setAttribute("style","display:none"),document.querySelector("button.club-chat-send").setAttribute("style","display:none"),ClubChat.insertPingToInput=function(e){let t=document.querySelector(".club-chat-input-custom");if(t.selectionStart||"0"==t.selectionStart){let i=t.value.substr(0,t.selectionStart),s=t.value.substr(t.selectionEnd);""==i||i.endsWith(" ")||(i+=" "),s.startsWith(" ")||(s=" "+s),t.value=i+"@"+e.innerHTML.replaceAll(" ","_")+s,t.selectionStart=i.length+2+e.innerHTML.length,t.selectionEnd=t.selectionStart}else t.value+="@"+e.innerHTML.replaceAll(" ","_")+" ";t.focus()}}function checkPushVersion(){if(null!=document.getElementById("HHClubChatPlusPlus_UpdateMessage"))return;const e=new Image;e.src="https://raw.githubusercontent.com/HH-GAME-MM/HH-Club-Chat-Plus-Plus/main/pushVersion.gif?"+Date.now()+"#"+Date.now(),e.onload=function(){let t=e.height-1,i=e.width-1,s=GM_info.script.version.split(".");if(parseInt(s[0])<t||parseInt(s[0])==t&&parseInt(s[1])<i){let e=document.querySelector("#resize-chat-box div.chat-tabs"),t=document.createElement("a");t.setAttribute("id","HHClubChatPlusPlus_UpdateMessage"),t.setAttribute("style","color:red"),t.setAttribute("href",HHCLUBCHATPLUSPLUS_URL_DOWNLOAD),t.setAttribute("target","_blank"),t.innerHTML="HH Club Chat++ is outdated. Update now!",e.appendChild(t)}},setTimeout(checkPushVersion,36e5)}function fixClubChat(e=0){if(!ClubChat.hasInit){if(!(e<10))return;e++,null!=ClubChat.chatVars&&ClubChat.init()}ClubChat.hasInit?(ClubChat.club_id=ClubChat.chatVars.CLUB_INFO.id_club,void 0===ClubChat.hasFirstInit&&(ClubChat.hasFirstInit=!0,ClubChat.socket.on("pin",parsePinnedMessage),null!=document.querySelector("div.pinned-block div.container div")&&parsePinnedMessage(),fixTabs_MozillaFirefox())):e<10?setTimeout(fixClubChat,1e3,e):setTimeout(fixClubChat,6e4)}function fixTabs_MozillaFirefox(){club_tabs.switchTab("chat_members_list","chat-tabs","chat-container"),club_tabs.switchTab("chat_block","chat-tabs","chat-container")}function fixScrolling(){ClubChat.updateScrollPosition=function(){ClubChat.$msgHolder[0].scrollTop>getScrollTopMax()-250&&scrollDown()},ClubChat.resizeNiceScrollAndUpdatePosition=function(){ClubChat.$msgHolder.getNiceScroll().resize(),ClubChat.updateScrollPosition()},ClubChat.resizeNiceScroll=function(){ClubChat.$msgHolder.getNiceScroll().resize()}}function scrollDown(){ClubChat.$msgHolder[0].scrollTop=getScrollTopMax()}function getScrollTopMax(){return ClubChat.$msgHolder[0].scrollHeight-ClubChat.$msgHolder[0].clientHeight}function parsePinnedMessage(e=null){observerMessagesFunction([{addedNodes:[document.querySelector("div.pinned-block div.container div")],target:document.querySelector("div.pinned-block div.container"),pinnedBlock:!0}],observerMessages)}function getIFrame(){let e=document.getElementById("hh_game");return e=e.contentWindow||e.contentDocument,e.document&&(e=e.document),e}function addIFrameCss(e){let t=e.getElementById("cssIFrame");null==t&&(t=e.createElement("style")),e.head.appendChild(t),t.setAttribute("id","cssIFrame");let i=isMobile();t.sheet.insertRule('#chat_btn .chat_mix_icn::after {content:"++";position:absolute;width:auto;font-size:'+(i?46:26)+"px;bottom:-"+(i?24:14)+"px;right:-8px;text-shadow:0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000,0 0 1px #000;-moz-transform:rotate(0.05deg);}"),t.sheet.insertRule("#chat_btn div.ping {display:none;position:absolute;top:"+(i?70:45)+"px;left:0px;width:150px;border:1px solid #ffb827;border-radius:15px;background-color:rgba(32, 3, 7, 0.7);}"),t.sheet.insertRule("#chat_btn div.visible {display:block !important;}"),t.sheet.insertRule("#chat_btn div.ping div {padding:5px 10px 5px 10px;text-align:center;font-size:14px;}"),t.sheet.insertRule("header {z-index:21 !important;}")}function getPingNotificationBox(e){let t=e.getElementById("ping");if(null==t){let i=e.getElementById("chat_btn");t=e.createElement("div"),t.setAttribute("id","ping"),t.setAttribute("class","ping"),t.appendChild(e.createElement("div")),i.appendChild(t)}return t}function pingUpdateText(e){e.firstChild.innerHTML=1==pingMessageCount?"There is a new message for you!":"There are "+pingMessageCount+" new messages for you!"}function pingVisible(e){e.setAttribute("class","ping visible")}function pingInvisible(e){e.setAttribute("class","ping")}function loadLastMsgTimestampSeen(){let e=localStorage.getItem("HHClubChatPlusPlus_LastMsgTimestampSeen");return null==e?0:parseInt(e)}function saveLastMsgTimestampSeen(){localStorage.setItem("HHClubChatPlusPlus_LastMsgTimestampSeen",lastMsgTimestampSeen)}function loadLastChatWindowPositionAndSize(e){if(isMobile())localStorage.removeItem("HHClubChatPlusPlus_PositionAndSize");else{let t=localStorage.getItem("HHClubChatPlusPlus_PositionAndSize");if(null!=t){let i=t.split(",");4==i.length&&(e.style.left=i[0],e.style.top=i[1],e.style.width=i[2],e.style.height=i[3])}}}function saveLastChatWindowPositionAndSize(e){isMobile()||localStorage.setItem("HHClubChatPlusPlus_PositionAndSize",e.style.left+","+e.style.top+","+e.style.width+","+e.style.height)}function getGirlNameById(e,t){return null!=t&&t.has(e.toString())?t.get(e.toString()).name:null}function getGirlIdByName(e,t){if(null!=t){let i=e.toLowerCase().replace(/[’´`']/g,"?");for(let[e,s]of t)if(s.name.toLowerCase().replace(/[’´`']/g,"?")==i)return e}return-1}function getGirlGradeById(e,t){if(null!=t&&t.has(e.toString())){let i=t.get(e.toString()).grade;return void 0===i?-1:i}return-1}function getHHPlusPlusGirlDictionary(){let e=localStorage.getItem("HHPlusPlusGirlDictionary");return null!=e?new Map(JSON.parse(e)):new Map}function isMobile(){return ClubChat.isMobileSize()}function strIsInt(e){return"string"==typeof e&&(!isNaN(e)&&!isNaN(parseInt(e)))}function initEmojiKeyboard(){let e=document.createElement("script");e.src="https://cdn.jsdelivr.net/npm/fuse.js/dist/fuse.js",e.onload=function(){initEmojiKeyboard_OnLoad()},document.head.appendChild(e),insertEmojiKeyboardCssFile();let t=document.createElement("button");t.setAttribute("id","btnEmojisGIFs"),document.querySelector(".club-chat-input-custom").parentNode.appendChild(t)}function initEmojiKeyboard_OnLoad(){emojiKeyboard=new EmojiKeyboard,emojiKeyboard.resizable=!1,emojiKeyboard.auto_reconstruction=!0,emojiKeyboard.default_placeholder="Search GIF / Emoji ...",emojiKeyboard.customEmojiGifDeleteMode=0,emojiKeyboard.callback=(e,t)=>{if(emojiKeyboard.customEmojiGifDeleteMode>0){let t=!1,i=!1;isCustomEmojiCode(e.emoji)?i=removeCustomEmojiFromLocalStore(e.emoji):(t=isCustomGifCode(e.emoji),t&&(i=removeCustomGifFromLocalStore(e.emoji))),i&&emojiKeyboard.get_keyboard(document).querySelector('img.emojikb-emoji[data-emoji="'+e.emoji+'"]').remove()}else{let t=document.querySelector(".club-chat-input-custom");if(t.selectionStart||"0"==t.selectionStart){let i=t.value.substr(0,t.selectionStart),s=t.value.substr(t.selectionEnd);""==i||i.endsWith(" ")||(i+=" "),s.startsWith(" ")||(s=" "+s),t.value=i+e.emoji+s,t.selectionStart=i.length+1+e.emoji.length,t.selectionEnd=t.selectionStart}else t.value+=e.emoji+" ";t.focus()}};let e=document.createElement("style");document.head.appendChild(e),e.sheet.insertRule('img.emojikb-emoji[data-category="GIFs"] { width: auto; height: auto; max-width: 200px; max-height: 100px; }');let t=emojiKeyboard.emojis.get("Emojis");mapEmojis.forEach(((e,i)=>{e.startsWith(":")||t.push({url:e.startsWith("res:")?HHCLUBCHATPLUSPLUS_URL_RES+"emojis/"+e.substr(4):"https://cdn.discordapp.com/emojis/"+e+".webp?size=48&quality=lossless",name:i,emoji:i,unicode:i})})),loadCustomEmojisFromLocalStorage().forEach((e=>{t.push({url:convertCustomEmojiCodeToUrl(e),name:e,emoji:e,unicode:e})}));let i=emojiKeyboard.emojis.get("GIFs");mapGIFs.forEach(((e,t)=>{if(Array.isArray(e))for(let s=0;s<e.length;s++){let n=e[s],a=n.startsWith("https://")?n:"https://media.tenor.com/"+n,o=t+(1!=e.length?"_"+s:"");i.push({url:a,name:o,emoji:o,unicode:o})}})),loadCustomGifsFromLocalStorage().forEach((e=>{i.push({url:convertCustomGifCodeToUrl(e),name:e,emoji:e,unicode:e})})),emojiKeyboard.instantiate(document.getElementById("btnEmojisGIFs"));let s=document.createElement("style");document.head.appendChild(s),s.sheet.insertRule("#emojikb-maindiv {display:none}"),emojiKeyboard.wait_for_ready().then((()=>{emojiKeyboard.toggle_window(),s.remove(),updateEmojiKeyboardPositionAndSize(document.getElementById("resize-chat-box"))}))}function updateEmojiKeyboardPositionAndSize(e){let t=document.getElementById("emojikb-maindiv");if(null!=t){let i,s,n,a=e.getBoundingClientRect();isMobile()?(n=a.right-a.left,i=a.left,s=a.top):(n=470,i=a.right,s=a.bottom-489),t.setAttribute("style","width:"+n+"px;height:478px;z-index:250;right:auto;bottom:auto;left:"+i+"px;top:"+s+"px")}}function insertEmojiKeyboardCssFile(){let e=document.createElement("style");e.innerHTML="\n.emojikb-hidden {\n    display: none !important;\n}\n\n#emojikb-maindiv {\n    display: flex;\n    flex-direction: column;\n    height: 444px;\n    position: absolute;\n    z-index: 2;\n    right: 0;\n    bottom: 20px;\n    user-select: none;\n    font-family: 'Whitney', 'Catamaran', 'Helvetica Neue', sans-serif;\n}\n\n#emojikb-maindiv.resizable:after {\n    content: \" \";\n       position: absolute;\n       left: 0;\n       width: 5px;\n       height: 100%;\n       cursor: ew-resize;\n   }\n\n#emojikb-searchdiv {\n    border: 3px solid #ffa23e;\n    border-radius: 7px 7px 0 0;\n    border-bottom: 1px solid #ffa23e;\n    background-color: #5d2031;\n    padding: 12px 5px 12px 3%;\n    display: flex;\n}\n\n#emojikb-searchdiv svg {\n    fill: rgb(114, 118, 125);\n    width: 24px;\n    height: 24px;\n    margin: 0 12px;\n    align-self: center;\n}\n\n#emojikb-searchdiv input {\n    flex-grow: 1;\n    line-height: 32px;\n    height: 30px;\n    padding: 0 8px;\n    margin: 1px;\n    background-color: #391821;\n    border: none;\n    color: rgb(220, 221, 222);\n    border-radius: 4px;\n}\n\n#emojikb-searchdiv input:focus {\n    outline: none;\n}\n\n#emojikb-div2 {\n    display: flex;\n    height: 90%;\n}\n\n#emojikb-div3 {\n    border-bottom: 3px solid #ffa23e;\n    border-right: 3px solid #ffa23e;\n    border-radius: 0 0 7px;\n    background-color: #4f222e;\n    display: flex;\n    flex-direction: column;\n    flex-grow: 1;\n}\n\n#emojikb-leftlist {\n    border-left: 3px solid #ffa23e;\n    border-bottom: 3px solid #ffa23e;\n    display: flex;\n    flex-direction: column;\n    background-color: #5d2031;\n    float: left;\n    border-radius: 0 0 0 7px;\n    padding: 8px;\n    /* width: 32px; */\n}\n\n#emojikb-leftlist>svg {\n    width: 24px;\n    height: 24px;\n    fill: white;\n    /* align-self: center; */\n    padding: 4px;\n    border-radius: 4px;\n    margin-bottom: 2px;\n    transition: all .1s ease-in-out;\n    cursor: pointer;\n}\n\n#emojikb-leftlist>svg:hover {\n    background-color: #ffa23e;\n    fill: lightgray\n}\n\n#emojikb-leftlist>svg.selected {\n    background-color: #ffa23e;\n    fill: white;\n}\n\n#emojikb-show {\n    overflow-y: scroll;\n    scrollbar-color: #ffa23e transparent;\n    scrollbar-width: thin;\n    margin: 8px 8px 0 8px;\n    position: relative;\n    flex-grow: 1;\n}\n\n#emojikb-show svg {\n    width: 16px;\n    height: 16px;\n    fill: white;\n}\n\n.emojikb-categ {\n    margin-bottom: 12px;\n}\n\n.emojikb-categname {\n    position: -webkit-sticky;\n    position: sticky;\n    top: -1px;\n    padding: 1px 4px;\n    align-items: center;\n    display: flex;\n    background-color: #5d2031;\n    height: 32px;\n}\n\n.emojikb-categname span {\n    font-size: 12px;\n    color: white;\n    margin: 0 8px;\n    text-transform: uppercase;\n    transition: color .3s ease-in-out;\n}\n\n.emojikb-categ:hover > .emojikb-categname > span{\n    color: white;\n}\n\n.emojikb-categ:hover > .emojikb-categname > svg{\n    fill: white !important;\n}\n\n.emojikb-categ .emojikb-emoji {\n    height: 32px;\n    width: 32px;\n    border-radius: 4px;\n    cursor: pointer;\n    padding: 4px;\n}\n\n.emojikb-categ .emojikb-emoji.selected, .emojikb-categ .emojikb-emoji.lazy {\n    background-color: #ffa23e;\n}\n\n#emojikb-info {\n    flex-basis: 48px;\n    flex-shrink: 0;\n    background-color: #5d2031;\n    display: flex;\n    align-items: center;\n    padding: 0 3%;\n    border-radius: 0 0 7px;\n}\n\n#emojikb-info-icon {\n    height: 28px;\n    width: 28px;\n}\n\n#emojikb-info-name {\n    margin-left: 8px;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    font-weight: 600;\n    line-height: 20px;\n    color: white;\n    max-width: 355px;\n}",document.head.appendChild(e)}function promptAddCustomEmojiGif(e){let t="";mapCustomEmojiGifHosts.forEach(((e,i)=>{t+=e.name+", "}));let i="";mapCustomEmojiGifFileExtensions.forEach(((e,t)=>{i+=e+", "}));let s=prompt("Add a custom "+(e?"Emoji":"GIF")+" by pasting a valid direct URL from your image ("+(e?i.substr(0,i.length-2):".gif")+"). Valid Hosts: "+t.substr(0,t.length-2));if(null!=s){let t=s.endsWith(".gif"),i=convertUrlToCustomEmojiGifCode(s,t);if(null!=i&&e!=t){(e?addCustomEmojiToLocalStore(i):addCustomGifToLocalStore(i))?emojiKeyboard.addCustomEmojiGifCode(i,s,e):alert("The emoji / gif already exists!")}else alert("Invalid URL or file type!")}}function confirmDeleteModeCustomEmojiGif(e){"[-]"==e.innerText?confirm("Do you want to delete custom emojis / gifs?")&&(e.innerText="[DELETE MODE]",e.setAttribute("style","cursor:pointer;color:red"),emojiKeyboard.customEmojiGifDeleteMode++):(e.innerText="[-]",e.setAttribute("style","cursor:pointer"),emojiKeyboard.customEmojiGifDeleteMode--)}function addCustomEmojiToLocalStore(e){let t=loadCustomEmojisFromLocalStorage();return!t.includes(e)&&(t.push(e),saveCustomEmojisToLocalStorage(t),!0)}function removeCustomEmojiFromLocalStore(e){let t=loadCustomEmojisFromLocalStorage(),i=t.indexOf(e);return i>-1&&(t.splice(i,1),saveCustomEmojisToLocalStorage(t),!0)}function loadCustomEmojisFromLocalStorage(){let e=localStorage.getItem("HHClubChatPlusPlus_CustomEmojis");return null==e&&(e="[]"),JSON.parse(e)}function saveCustomEmojisToLocalStorage(e){localStorage.setItem("HHClubChatPlusPlus_CustomEmojis",JSON.stringify(e))}function addCustomGifToLocalStore(e){let t=loadCustomGifsFromLocalStorage();return!t.includes(e)&&(t.push(e),saveCustomGifsToLocalStorage(t),!0)}function removeCustomGifFromLocalStore(e){let t=loadCustomGifsFromLocalStorage(),i=t.indexOf(e);return i>-1&&(t.splice(i,1),saveCustomGifsToLocalStorage(t),!0)}function loadCustomGifsFromLocalStorage(){let e=localStorage.getItem("HHClubChatPlusPlus_CustomGifs");return null==e&&(e="[]"),JSON.parse(e)}function saveCustomGifsToLocalStorage(e){localStorage.setItem("HHClubChatPlusPlus_CustomGifs",JSON.stringify(e))}function convertUrlToCustomEmojiGifCode(e,t){let i,s,n=null,a=null;for(let[t,s]of mapCustomEmojiGifHosts)if(e.startsWith(s.url)){n=t,i=s.url.length;break}if(t)a="",s=4;else for(let[t,i]of mapCustomEmojiGifFileExtensions)if(e.endsWith(i)){a=t+":",s=i.length;break}return null!=n&&null!=a?(t?"!":":")+n+e.substr(i,e.length-i-s)+a:null}function isCustomEmojiCode(e){return e.startsWith(":")&&e.endsWith(":")&&e.length>4&&mapCustomEmojiGifHosts.has(e.substr(1,1))&&mapCustomEmojiGifFileExtensions.has(e.substr(e.length-2,1))}function isCustomGifCode(e){return e.startsWith("!")&&e.length>2&&mapCustomEmojiGifHosts.has(e.substr(1,1))}function convertCustomEmojiCodeToUrl(e){return mapCustomEmojiGifHosts.get(e.substr(1,1)).url+e.substr(2,e.length-4)+mapCustomEmojiGifFileExtensions.get(e.substr(e.length-2,1))}function convertCustomGifCodeToUrl(e){return mapCustomEmojiGifHosts.get(e.substr(1,1)).url+e.substr(2)+".gif"}function getMapCustomEmojiGifHosts(){return new Map([["ÿ",{name:"snipboard.io",url:"https://snipboard.io/"}],["þ",{name:"imgur.com",url:"https://i.imgur.com/"}],["ý",{name:"tenor.com",url:"https://media.tenor.com/"}],["ü",{name:"giphy.com",url:"https://media.giphy.com/media/"}]])}function getMapCustomEmojiGifFileExtensions(){return new Map([["ÿ",".png"],["þ",".jpg"]])}function getMapGIFs(){return new Map([["!:p",["OHfZzUQuB88AAAAC/rin-shrug.gif","FVr4Zhmsnm4AAAAd/kotomine-kirei.gif"]],["!?",["https://i.imgur.com/aovpJWc.gif","47_TR9UGqh4AAAAM/fate-rin-tohsaka.gif"]],["!25",["ww8XZ4PLWgEAAAAC/25-years.gif","1eUwz8-OAwgAAAAC/25-pusheen.gif"]],["!both",["odyVsZbC-OYAAAAC/why-not-both-why-not.gif","ZjqPAZpKWAUAAAAC/the-road-to-el-dorado-both.gif"]],["!clap",["BHEkb1EYsaMAAAAC/aplausos-clapped.gif","3DslEXJ6bn8AAAAC/clap-slow-clap.gif","50IjyLmv8mQAAAAC/will-smith-clap.gif","jrIAsC6362EAAAAC/clap-clapping.gif","-DXhLQTX9hwAAAAd/im-proud-of-you-dan-levy.gif"]],["!dejavu",["CqoEATCG-1wAAAAC/déjàvu-drift.gif"]],["!doit",["NZXtIRvja5cAAAAC/doit-shialabeouf.gif"]],["!doubt",["ld5tk9ujuJsAAAAC/doubt-press-x.gif","_0AGcJvL5QYAAAAC/jim-halpert-face.gif","xZt1qV8KMbkAAAAC/ehh-probably-not.gif"]],["!fail",["sAdlyyKDxogAAAAC/bart-simpson-the-simpsons.gif","FOzbM2mVKG0AAAAC/error-windows-xp.gif"]],["!gm",["YnY4gUjy8JQAAAAC/fate-stay-night-rin-tohsaka.gif"]],["!gn",["n6xhcPW4zDcAAAAC/saber-goodnight.gif","AeCpJ0xNKKcAAAAC/anime-foodwars.gif","E9cdA-c9vcwAAAAC/kumo-desu-ga-nani-ka-kumoko.gif"]],["!gz",["xDHCe07zrocAAAAC/congrats-minions.gif","2Di8n4U2wJUAAAAC/yay-congrats.gif"]],["!gratz","!gz"],["!congratz","!gz"],["!congrats","!gz"],["!headpat",["xE9m5-LkBeEAAAAi/anime-kanna.gif"]],["!hehe",["s6axyeNl4HMAAAAC/fate-ubw.gif"]],["!heyhey",["iOG-xvGrcVQAAAAC/hayasaka-kaguya.gif"]],["!legit",["JwI2BNOevBoAAAAC/sherlock-martin-freeman.gif"]],["!liar",["oZrRoDQDXZ4AAAAC/anakin-liar.gif","ZZi-EEsk_X8AAAAC/liar-mad.gif"]],["!moar",["dStuVKgo6kwAAAAC/crumch-game-grumps.gif","Ft71uoGyHLEAAAAC/cat-moar.gif","XnYJ-WoYGyMAAAAC/ln_strike-kylo-ren.gif"]],["!monster",["e1T7jSFlZ-EAAAAC/shrek-gingerbread.gif","A_JS3lx__egAAAAC/star-trek-tos.gif","fx-nkmNVA_MAAAAC/penguins-of-madagascar-kowalski.gif"]],["!new",["C52JpqHPWcYAAAAC/friends-phoebe.gif"]],["!ohmy",["svFFJHFmLccAAAAC/oh-my-george-takei.gif"]],["!proud",["-DXhLQTX9hwAAAAC/im-proud-of-you-dan-levy.gif","X9jgpiApABcAAAAC/yes-nod.gif","iU_-BMVz9BIAAAAC/im-proud-of-you-dwayne-johnson.gif","46dxApXEHh0AAAAd/smug-daniel-craig.gif"]],["!rng",["https://imgs.xkcd.com/comics/random_number.png","c6drTKdM9ZEAAAAS/rng-excalibur.gif","mACda5RzcAcAAAAd/destiny.gif"]],["!rule",["nPWzt3Rfql0AAAAC/fight-club-rules.gif","ijKrOkX2MEcAAAAC/fight-club-first-rule-of-fight-club.gif"]],["!sad",["Up7hRFmFY9AAAAAC/anime-sad-anime-pout.gif","B9w6cHA-RrYAAAAd/marin-cry-marin-sad.gif"]],["!sleepy",["ajpTPte6fI8AAAAd/rin-tohsaka-pyjamas.gif"]],["!thx",["35hmBwYHYikAAAAC/the-office-bow.gif","xCQSK3wG0OQAAAAC/my-hero.gif","Qc9cm8By46YAAAAd/doggo-dog.gif"]],["!ty","!thx"],["!thanks","!thx"],["!whale",["https://cdn.discordapp.com/attachments/344734413600587776/463933711193473044/Whale.png","Gb_N7yXyB-UAAAAC/marin-kitagawa-marin.gif","f_G-jdId4fkAAAAd/whale-gold.gif","id2Lsryg60cAAAAC/unusual-whales-unusual-whales-rain-money.gif"]],["!what",["eAqD-5MDzFAAAAAC/mai-sakurajima-sakurajima-mai.gif","Q0yIxNX0L-kAAAAC/wait-what-what.gif"]],["!why",["o2CYGlMLADUAAAAC/barack-obama-why.gif","OPbFPRevcv4AAAAC/ajholmes-why.gif","1Vh0XBrPM7MAAAAC/why-whats-the-reason.gif","y0Up9A_bTPwAAAAd/nph-why.gif","KjJTBQ9lftsAAAAC/why-huh.gif"]],["!wtf",["https://i.ytimg.com/vi/XjVKHZ_F4zo/maxresdefault.jpg"]]])}function getMapEmojis(){return new Map([[":kek:","588599124312457217"],[":pikaponder:","862672993720336394"],[":surprised:","589875097058279437"],[":surprisedpika:",":surprised:"],[":rip:","657438005602025486"],[":hi:","953431707556667433"],[":kanna_hi:",":hi:"],[":kannahi:",":hi:"],[":uwot:","650195017692086328"],[":wot:",":uwot:"],[":kanna_nom:","774778816870088724"],[":kannanom:",":kanna_nom:"],[":kanna_headpat:","667192299272273951"],[":kannaheadpat:",":kanna_headpat:"],[":tuturu:","562217717222866944"],[":louise_please:","950890624943546368"],[":thinky:","878610897709436928"],[":thonk:","860651714293006387"],[":smug:","1002518587833057320"],[":happy_rin:","953395143510224957"],[":thx:","294932319020515348"],[":ty:",":thx:"],[":thanks:",":thx:"],[":bunny:","527094255584542720"],[":bunny_sad:","855351276803457044"],[":bunnys:",":bunny_sad:"],[":bunny_joy:","861385389004947526"],[":bunnyj:",":bunny_joy:"],[":bunny_realization:","865514400759808020"],[":bunnyr:",":bunny_realization:"],[":tada:","res:tada.png"],[":sadtada:","733120928137085019"],[":notlikethis:","866732254357356624"],[":energy:","864645021561782332"],[":combativity:","848991758301265990"],[":fisting:",":combativity:"],[":kiss:","860659467876302889"],[":league:","860659427950460930"],[":worship:","902508422988169226"],[":ticket:","596905784160419876"],[":ymen:","294927828972208128"],[":money:",":ymen:"],[":koban:","294927828682801153"],[":kobans:",":koban:"],[":potion_endurance:","948310353735987240"],[":potion_love:","948310353828282408"],[":potion_lust:","948310353979252786"],[":crystal:","999279877834428416"],[":crystal_token:",":crystal:"],[":shard:","540690525238591518"],[":shards:",":shard:"],[":flowers:","860867149009780757"],[":book:","923655294381359104"],[":spellbook:",":book:"],[":perfume:","917383948408086529"],[":sandalwood:",":perfume:"],[":atm:","917383948554862632"],[":memories:",":atm:"],[":ginseng:","917383948387115018"],[":cordy:","917383948512919552"],[":cordys:",":cordy:"],[":cordyceps:",":cordy:"],[":am:","917383948496154675"],[":ame:",":am:"],[":allmastery:",":am:"],[":ep:","677981592706088982"],[":ep10:","904111725299765268"],[":gp10:","938587821755744316"],[":magazine:","923655467140542544"],[":datingtoken:","849076003882926100"],[":dating:",":datingtoken:"],[":kk:","915301903561265194"],[":kinkoid:",":kk:"],[":allgem:","918072869043458048"],[":allgems:",":allgem:"],[":blackgem:","910701075361845288"],[":blackgems:",":blackgem:"],[":redgem:","910701075420557412"],[":redgems:",":redgem:"],[":greengem:","910701075550576720"],[":greengems:",":greengem:"],[":orangegem:","910701075181469737"],[":orangegems:",":orangegem:"],[":yellowgem:","910701075852591144"],[":yellowgems:",":yellowgem:"],[":bluegem:","910701075345068034"],[":bluegems:",":bluegem:"],[":whitegem:","910701075672232016"],[":whitegems:",":whitegem:"],[":purplegem:","910701077568040990"],[":purplegems:",":purplegem:"],[":rainbow:","901254800690278491"],[":balanced:",":rainbow:"],[":black:","901255133004976149"],[":dominatrix:",":black:"],[":red:","901254872429637682"],[":eccentric:",":red:"],[":green:","901254909276602418"],[":exhibitionist:",":green:"],[":orange:","901254970542788628"],[":physical:",":orange:"],[":yellow:","901255043871830016"],[":playful:",":yellow:"],[":blue:","901255091665895424"],[":sensual:",":blue:"],[":white:","901255190433370192"],[":submissive:",":white:"],[":purple:","901255233773137991"],[":voyeur:",":purple:"]])}observerSendMsg.observe(document.querySelector("input.club-chat-input"),{attributes:!0}),observerSendMsg.observe(document.querySelector("button.club-chat-send"),{attributes:!0}),document.getElementById("hh_game").onload=function(){let e=getIFrame();if(addIFrameCss(e),0!=pingMessageCount){let t=getPingNotificationBox(e);pingUpdateText(t),pingVisible(t)}},window.addEventListener("resize",(function(){addIFrameCss(getIFrame()),updateEmojiKeyboardPositionAndSize(document.getElementById("resize-chat-box"))}));const categories=new Map([["People",["People & Body","Smileys & Emotion","Component"]],["Nature",["Animals & Nature"]],["Food",["Food & Drink"]],["Activities",["Activities"]],["Travel",["Travel & Places"]],["Objects",["Objects"]],["Symbols",["Symbols"]],["Flags",["Flags"]],["GIFs",[]],["Emojis",[]]]);class EmojiKeyboard{constructor(){this.emojis=new Map(Array.from(categories,(e=>[e[0],[]]))),this.categories=Array.from(categories.keys()),this.init_base_emojis(),this.callback=(e,t)=>{},this.auto_reconstruction=!0,this.default_placeholder="Find the right emoji for your needs 👌",this.resizable=!0,this.fuseIndex=null,this.fuse=null,"IntersectionObserver"in window&&(this.lazyImageObserver=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(e.isIntersecting){let i=e.target;i.src=i.dataset.src,i.classList.remove("lazy"),t.unobserve(i)}}))})),this.stickyObserver=new IntersectionObserver((e=>{e.forEach((e=>{if(!e.target.offsetParent)return;if(e.target.offsetParent.scrollTop-e.target.offsetTop>=1){const t=e.target.dataset.emojikb_categ,i=document.getElementById("emojikb-leftlist").querySelectorAll('svg[data-emojikb_categ="'+t+'"]');if(!i[0])return;this.click_on_category(this,i[0],!0)}}))}),{threshold:[0,1]}))}instantiate(e){this.wait_for_ready().then((()=>{let t=e.ownerDocument;this.get_keyboard(t),e.addEventListener("click",(()=>this.toggle_window()))}))}toggle_window(){let e=document.getElementById("emojikb-maindiv");if(!e){if(!this.auto_reconstruction)return;e=this.get_keyboard(document)}e.classList.toggle("emojikb-hidden")}add_emojis(e){for(const t of e)t.url&&t.name&&this.custom_emojis.push({url:t.url,name:t.name})}async wait_for_ready(){let e=0;const t=e=>new Promise((t=>setTimeout(t,e)));for(;e<30&&0===this.emojis.get("People").length;)await t(500),e++;30==e&&console.error("Unable to instantiate emojis")}get_keyboard(e){let t=e.getElementById("emojikb-maindiv");return t||(t=this.create_keyboard(e)),t}click_on_emoji(e,t){let i=!t.shiftKey&&0==emojiKeyboard.customEmojiGifDeleteMode;i&&e.toggle_window();const s=Object.assign({},t.target.dataset);e.callback(s,i)}hover_on_emoji(e,t){const i=t.target.ownerDocument,s=t.target.dataset.name,n=t.target.src;i.getElementById("emojikb-info-name").innerText=s,i.getElementById("emojikb-info-icon").src=n,i.getElementById("emojikb-textinput").placeholder=s,t.target.classList.add("selected")}hover_out_emoji(e,t){t.target.ownerDocument.getElementById("emojikb-textinput").placeholder=e.default_placeholder,t.target.classList.remove("selected")}click_on_category(e,t,i){let s;if(s=t.target?"path"==t.target.nodeName?t.target.parentNode:t.target:t,$("#emojikb-leftlist>svg.selected").removeClass("selected"),s.classList.add("selected"),!i){const e=s.dataset.emojikb_categ,t=s.ownerDocument.querySelectorAll('div.emojikb-categname[data-emojikb_categ="'+e+'"]');if(!t[0])return;t[0].parentNode.scrollIntoView(!0,{behavior:"instant"}),t[0].parentNode.parentNode.scrollTop++}}on_typing(e){if(""===e.target.value)return e.target.ownerDocument.querySelectorAll("img.emojikb-emoji").forEach((e=>{e.classList.toggle("emojikb-hidden",!1)})),void e.target.ownerDocument.querySelectorAll("div.emojikb-categ").forEach((e=>{e.classList.toggle("emojikb-hidden",!1)}));this.fuse||this.init_fuse();const t=Array.from(this.fuse.search(e.target.value),(e=>e.item.name));let i=new Map(Array.from(this.categories,(e=>[e,0])));e.target.ownerDocument.querySelectorAll("img.emojikb-emoji").forEach((e=>{e.classList.toggle("emojikb-hidden",!t.includes(e.dataset.name)),t.includes(e.dataset.name)||i.set(e.dataset.category,i.get(e.dataset.category)+1)})),e.target.ownerDocument.querySelectorAll("div.emojikb-categ").forEach((e=>{const t=i.get(e.firstChild.dataset.emojikb_categ);e.classList.toggle("emojikb-hidden",e.childElementCount<=t+1)}))}init_fuse(){let e=[];for(const t of this.emojis.values())e=e.concat(t);this.fuseIndex=Fuse.createIndex(["name","unicode"],e),this.fuse=new Fuse(e,{keys:[{name:"name",weight:.7},{name:"unicode",weight:.3}],minMatchCharLength:2,threshold:.35,distance:15},this.fuseIndex)}init_base_emojis(){fetch("https://gist.githubusercontent.com/oliveratgithub/0bf11a9aff0d6da7b46f1490f86a71eb/raw/d8e4b78cfe66862cf3809443c1dba017f37b61db/emojis.json").then((async e=>{var t=e.headers.get("content-type");if(t&&(t.includes("application/json")||t.includes("text/plain"))){(await e.json()).emojis.forEach((e=>{if(e.shortname.includes("_skin_tone")||e.unicode.includes(":"))return;const t=this.find_right_category(e.category);t&&this.emojis.get(t).push({emoji:e.emoji,url:"https://twemoji.maxcdn.com/v/13.0.1/72x72/"+e.unicode.replace(/ /g,"-").toLowerCase()+".png",name:e.shortname,unicode:e.unicode})}))}else console.error("Oops, can't get the usual emojis list! (invalid format)")}))}find_right_category(e){if(e){try{let t=e.match(/[^(]+/)[0].trim();for(const[e,i]of categories)if(i.includes(t))return e}catch(e){console.error(e)}console.warn("Missing emoji category:",e)}}create_keyboard(e){const t=new DOMParser,i=e=>t.parseFromString(e,"text/xml").firstChild;let s=e.createElement("div");if(s.id="emojikb-maindiv",s.style.width="500px",this.resizable){s.classList.add("resizable"),s.dataset.m_pos=0;const t=e=>{this.resize(e,s)};s.addEventListener("mousedown",(i=>{i.offsetX<4&&(s.dataset.m_pos=i.x,e.addEventListener("mousemove",t,!1))}),!1),e.addEventListener("mouseup",(()=>{e.removeEventListener("mousemove",t,!1)}),!1)}let n=e.createElement("div");n.id="emojikb-searchdiv";let a=e.createElement("input");a.id="emojikb-textinput",a.placeholder=this.default_placeholder,a.addEventListener("input",(e=>this.on_typing(e))),n.appendChild(a),n.appendChild(i(SVG_HTML.search));let o=e.createElement("div");o.id="emojikb-div2";let l=e.createElement("div");l.id="emojikb-leftlist";let r=e.createElement("div");r.id="emojikb-div3";let d,c=e.createElement("div");c.id="emojikb-show";for(const t of[[SVG_HTML.custom,"Emojis"],[SVG_HTML.custom,"GIFs"],[SVG_HTML.head,"People"],[SVG_HTML.leaf,"Nature"],[SVG_HTML.food,"Food"],[SVG_HTML.game,"Activities"],[SVG_HTML.submarine,"Travel"],[SVG_HTML.tea,"Objects"],[SVG_HTML.heart,"Symbols"],[SVG_HTML.flag,"Flags"]]){if(0===this.emojis.get(t[1])?.length)continue;let s=i(t[0]);s.dataset.emojikb_categ=t[1],s.addEventListener("click",(e=>this.click_on_category(this,e))),l.appendChild(s);let n=e.createElement("div");n.className="emojikb-categ";let a=e.createElement("div");a.className="emojikb-categname",a.dataset.emojikb_categ=t[1],this.stickyObserver&&this.stickyObserver.observe(a);let o=e.createElement("span");if(o.innerText=t[1],a.appendChild(i(t[0])),a.appendChild(o),t[0]==SVG_HTML.custom){let i=e.createElement("span");i.setAttribute("style","cursor:pointer"),i.innerText="[+]",i.addEventListener("click",(function(){promptAddCustomEmojiGif("Emojis"==t[1])})),a.appendChild(i);let s=e.createElement("span");s.setAttribute("style","cursor:pointer"),s.innerText="[-]",s.addEventListener("click",(function(){confirmDeleteModeCustomEmojiGif(this)})),a.appendChild(s)}n.appendChild(a);let r="Emojis"!=t[1]&&"GIFs"!=t[1]?this.emojis.get(t[1]).sort(((e,t)=>e.unicode.localeCompare(t.unicode))):this.emojis.get(t[1]);for(const i of r){let s=e.createElement("img");s.dataset.name=i.name,s.dataset.unicode=i.unicode,s.dataset.emoji=i.emoji,s.dataset.category=t[1],s.className="emojikb-emoji",d=d||i,this.lazyImageObserver?(this.lazyImageObserver.observe(s),s.dataset.src=i.url,s.classList.add("lazy")):s.src=i.url,"Emojis"!=t[1]&&"GIFs"!=t[1]&&s.addEventListener("error",(e=>{const t=e.target.dataset,i=this.emojis.get(t.category).findIndex((e=>e.name==t.name));i&&this.emojis.get(t.category).splice(i,1),e.target.remove(),this.init_fuse()})),s.addEventListener("click",(e=>this.click_on_emoji(this,e))),s.addEventListener("mouseenter",(e=>this.hover_on_emoji(this,e))),s.addEventListener("mouseleave",(e=>this.hover_out_emoji(this,e))),n.appendChild(s)}c.appendChild(n)}let m=e.createElement("div");m.id="emojikb-info";let u=e.createElement("img");u.id="emojikb-info-icon",u.src=d.url;let h=e.createElement("div");h.id="emojikb-info-name",h.innerText=d.name,m.appendChild(u),m.appendChild(h),r.appendChild(c),r.appendChild(m),o.appendChild(l),o.appendChild(r),s.appendChild(n),s.appendChild(o),e.documentElement.appendChild(s)}addCustomEmojiGifCode(e,t,i){let s=document.createElement("img");s.dataset.name=e,s.dataset.unicode=e,s.dataset.emoji=e,s.dataset.category=i?"Emojis":"GIFs",s.className="emojikb-emoji",this.lazyImageObserver?(this.lazyImageObserver.observe(s),s.dataset.src=t,s.classList.add("lazy")):s.src=t,s.addEventListener("click",(e=>this.click_on_emoji(this,e))),s.addEventListener("mouseenter",(e=>this.hover_on_emoji(this,e))),s.addEventListener("mouseleave",(e=>this.hover_out_emoji(this,e))),this.get_keyboard(document).querySelector('div.emojikb-categname[data-emojikb_categ="'+(i?"Emojis":"GIFs")+'"]').parentNode.appendChild(s)}resize(e,t){const i=t.dataset.m_pos-e.x;t.dataset.m_pos=e.x,t.style.width=parseInt(getComputedStyle(t,"").width)+i+"px"}}const SVG_HTML={search:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>',head:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.477 2 2 6.477 2 12C2 17.522 6.477 22 12 22C17.523 22 22 17.522 22 12C22 6.477 17.522 2 12 2ZM16.293 6.293L17.707 7.706L16.414 9L17.707 10.293L16.293 11.706L13.586 9L16.293 6.293ZM6.293 7.707L7.707 6.294L10.414 9L7.707 11.707L6.293 10.294L7.586 9L6.293 7.707ZM12 19C9.609 19 7.412 17.868 6 16.043L7.559 14.486C8.555 15.92 10.196 16.831 12 16.831C13.809 16.831 15.447 15.92 16.443 14.481L18 16.04C16.59 17.867 14.396 19 12 19Z"></path></svg>',leaf:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.814 8.982C4.539 11.674 4.656 15.591 6.931 18.153L4.034 21.579L5.561 22.87L8.463 19.437C9.569 20.127 10.846 20.513 12.161 20.513C14.231 20.513 16.183 19.607 17.516 18.027C20.069 15.01 20.771 6.945 21 3C17.765 3.876 9.032 6.356 6.814 8.982V8.982ZM8.935 17.331C6.826 15.548 6.56 12.382 8.342 10.272C9.592 8.793 14.904 6.845 18.764 5.698L8.935 17.331V17.331Z"></path></svg>',food:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 18H13V22H11V18Z"></path><path d="M12 2C8.822 2 7 4.187 7 8V16C7 16.552 7.447 17 8 17H16C16.553 17 17 16.552 17 16V8C17 4.187 15.178 2 12 2ZM11 14.001H10V5.001H11V14.001ZM14 14.001H13V5.001H14V14.001Z"></path></svg>',game:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.66487 5H18.3351C19.9078 5 21.2136 6.21463 21.3272 7.78329L21.9931 16.9774C22.0684 18.0165 21.287 18.9198 20.248 18.9951C20.2026 18.9984 20.1572 19 20.1117 19C18.919 19 17.8785 18.1904 17.5855 17.0342L17.0698 15H6.93015L6.41449 17.0342C6.12142 18.1904 5.08094 19 3.88826 19C2.84645 19 2.00189 18.1554 2.00189 17.1136C2.00189 17.0682 2.00354 17.0227 2.00682 16.9774L2.67271 7.78329C2.78632 6.21463 4.0921 5 5.66487 5ZM14.5 10C15.3284 10 16 9.32843 16 8.5C16 7.67157 15.3284 7 14.5 7C13.6716 7 13 7.67157 13 8.5C13 9.32843 13.6716 10 14.5 10ZM18.5 13C19.3284 13 20 12.3284 20 11.5C20 10.6716 19.3284 10 18.5 10C17.6716 10 17 10.6716 17 11.5C17 12.3284 17.6716 13 18.5 13ZM6.00001 9H4.00001V11H6.00001V13H8.00001V11H10V9H8.00001V7H6.00001V9Z"></path></svg>',submarine:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 17H19.725C19.892 16.529 20 16.029 20 15.5C20 13.015 17.985 11 15.5 11H13.5L12.276 8.553C12.107 8.214 11.761 8 11.382 8H7C6.448 8 6 8.447 6 9V11.051C3.753 11.302 2 13.186 2 15.5C2 17.986 4.015 20 6.5 20H15.5C16.563 20 17.527 19.616 18.297 19H22V17ZM6.5 16.75C5.81 16.75 5.25 16.19 5.25 15.5C5.25 14.81 5.81 14.25 6.5 14.25C7.19 14.25 7.75 14.81 7.75 15.5C7.75 16.19 7.19 16.75 6.5 16.75ZM11.5 16.75C10.81 16.75 10.25 16.19 10.25 15.5C10.25 14.81 10.81 14.25 11.5 14.25C12.19 14.25 12.75 14.81 12.75 15.5C12.75 16.19 12.19 16.75 11.5 16.75ZM16.5 16.75C15.81 16.75 15.25 16.19 15.25 15.5C15.25 14.81 15.81 14.25 16.5 14.25C17.19 14.25 17.75 14.81 17.75 15.5C17.75 16.19 17.19 16.75 16.5 16.75Z"></path><path d="M8 7H10C10 5.346 8.654 4 7 4H6V6H7C7.551 6 8 6.449 8 7Z"></path></svg>',tea:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 5.999H17V4.999C17 4.448 16.553 3.999 16 3.999H4C3.447 3.999 3 4.448 3 4.999V12.999C3 14.488 3.47 15.865 4.265 16.999H15.722C16.335 16.122 16.761 15.105 16.92 13.999H18C20.205 13.999 22 12.205 22 9.999C22 7.794 20.205 5.999 18 5.999V5.999ZM18 12H17V8H18C19.104 8 20 8.897 20 10C20 11.102 19.104 12 18 12Z"></path><path d="M2 18H18V20H2V18Z"></path></svg>',heart:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16 4.001C14.406 4.001 12.93 4.838 12 6.081C11.07 4.838 9.594 4.001 8 4.001C5.243 4.001 3 6.244 3 9.001C3 14.492 11.124 19.633 11.471 19.849C11.633 19.95 11.817 20.001 12 20.001C12.183 20.001 12.367 19.95 12.529 19.849C12.876 19.633 21 14.492 21 9.001C21 6.244 18.757 4.001 16 4.001V4.001Z"></path></svg>',flag:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 6.002H14V3.002C14 2.45 13.553 2.002 13 2.002H4C3.447 2.002 3 2.45 3 3.002V22.002H5V14.002H10.586L8.293 16.295C8.007 16.581 7.922 17.011 8.076 17.385C8.23 17.759 8.596 18.002 9 18.002H20C20.553 18.002 21 17.554 21 17.002V7.002C21 6.45 20.553 6.002 20 6.002Z"></path></svg>',custom:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z"/></svg>'};
})();
